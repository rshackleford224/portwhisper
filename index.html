<head><meta charset="UTF-8"></head>
[ok]
<div id="content"></div>

<script>
function startWebsocket() {
    console.log("here we go!");
    var content = document.getElementById('content');
    var socket = new WebSocket('ws://localhost:1337');
    socket.onopen = function () {
    socket.send("hello from the client!");

    }; //startWebsocket

    socket.onmessage = function (message) {
        //content.innerHTML += message.data +'<br />';

  //      var ports = [80, 22, 443, 445, 3389, 3306, 1433, 8080, 8009, 8008, 8007, 21];
//        for (var i = 0; i < ports.length; i++) {
        var s = new WebSocket("ws://"+message.data);

        s.onerror = function(evt)
        {
        console.log(evt);

        	if (parseInt(evt.timeStamp) < 1050)
		{
		console.log(evt.timeStamp);
        	console.log("this port seems open!" + evt.target.url);
		socket.send(evt.timeStamp);
		socket.send("\x1b[32m" + "this port seems open!" + evt.target.url + "\x1b[37m");
		}
		else
		{
		console.log(evt.timeStamp);
		console.log("this port appears to be unresponsive..." + evt.target.url);
                socket.send(evt.timeStamp);
		socket.send("\x1b[31m" + "this port appears to be unresponsive..." + evt.target.url + "\x1b[37m");
		}
	setTimeout("location.reload(true);", 3000)
        };

    }; //socket.onmessage


	
	socket.onclose = function() {
		socket=null;
		setTimeout(startWebsocket, 5000);
	}; //socket.onclose

    	socket.onerror = function (error) {
        console.log('WebSocket error: ' + error);
	}; //socket.onerror

}; //end main function

startWebsocket();

</script>
